<div class="donor-list-container">

  <div class="page-header">
    <h1>{{ (i18n.terms$ | async)?.donorListTitle }}</h1>
    <button class="btn btn-primary add-donor-btn" (click)="createDonor()">{{ (i18n.terms$ | async)?.addNewDonor }}</button>
  </div>

  <div class="filters-section">
    <div class="filter-row">
      <div class="filter-group">
        <label>{{ (i18n.terms$ | async)?.generalSearch }}</label>
        <input type="text" class="form-control" [placeholder]="(i18n.terms$ | async)?.searchNameAddressPhone" [(ngModel)]="searchTerm" (ngModelChange)="onLocalFilterChange()">
      </div>
    </div>
  </div>

  <div class="donors-grid">
    <div class="grid-header">
      <div class="grid-col">{{ (i18n.terms$ | async)?.name }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.address }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.phone }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.email }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.totalDonationsHeader }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.lastDonation }}</div>
      <div class="grid-col">{{ (i18n.terms$ | async)?.actions }}</div>
    </div>

    <div class="grid-row" *ngFor="let donor of filteredDonors">
      <div class="grid-col">
        <div class="donor-name">
          <strong>{{donor.fullName}}</strong>
          <small *ngIf="donor.idNumber">({{ (i18n.terms$ | async)?.idNumberShort }}: {{donor.idNumber}})</small>
        </div>
      </div>
      <div class="grid-col">{{getDonorAddress(donor.id)}}</div>
      <div class="grid-col">{{getDonorPhone(donor.id)}}</div>
      <div class="grid-col">{{getDonorEmail(donor.id)}}</div>
      <div class="grid-col">{{getDonorTotalDonations(donor.id) | number:'1.2-2'}}</div>
      <div class="grid-col">{{donor.createdDate | date:'dd/MM/yyyy'}}</div>
      <div class="grid-col actions">
        <!-- <button class="btn-icon btn-view" (click)="viewDonor(donor)" [title]="(i18n.terms$ | async)?.viewDetails">üëÅ</button> -->
        <button class="btn-icon btn-edit" (click)="editDonor(donor)" [title]="(i18n.terms$ | async)?.edit">‚úè</button>
        <button class="btn-icon btn-delete" (click)="deleteDonor(donor)" [title]="(i18n.terms$ | async)?.delete">üóë</button>
        <!-- <button class="btn-icon btn-toggle" (click)="deactivateDonor(donor)" *ngIf="donor.isActive" [title]="(i18n.terms$ | async)?.deactivate">‚è∏</button> -->
      </div>
    </div>
  </div>

  <div class="pagination">
    <button class="btn-page">{{ (i18n.terms$ | async)?.previous }}</button>
    <span class="page-info">{{ (i18n.terms$ | async)?.pageOf?.replace('{current}', '1')?.replace('{total}', filteredDonors.length + '') }}</span>
    <button class="btn-page">{{ (i18n.terms$ | async)?.next }}</button>
  </div>
</div>


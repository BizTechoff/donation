<div class="donors-map-container">
  <div class="page-header">
    <h1>驻转 转专</h1>
    <div class="map-controls">
      <button class="btn btn-primary" (click)="refreshMap()">专注 驻</button>
      <button class="btn btn-secondary" (click)="toggleSummary()">{{ showSummary ? '住转专 住' : '爪 住' }}</button>
      <button class="btn btn-info" (click)="geocodeMissingAddresses()" [disabled]="loading">专 转转</button>
    </div>
  </div>

  <!-- 转 住 -->
  <div class="summary-panel" [class.visible]="showSummary">
    <h3>住 转</h3>
    <div class="summary-stats">
      <div class="stat-card">
        <div class="stat-icon"></div>
        <div class="stat-content">
          <h4>住" 转专</h4>
          <span class="stat-number">{{ totalDonors }}</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"></div>
        <div class="stat-content">
          <h4>转专 驻注</h4>
          <span class="stat-number">{{ activeDonors }}</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"></div>
        <div class="stat-content">
          <h4>爪注 转专</h4>
          <span class="stat-number">{{ averageDonation | number }}</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"></div>
        <div class="stat-content">
          <h4>转专 驻</h4>
          <span class="stat-number">{{ donorsOnMap }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 驻转 转专 -->
  <div class="map-container">
    <div id="donors-map" class="leaflet-map" #mapElement></div>
  </div>

  <!-- 拽专 爪注 -->
  <div class="map-legend">
    <h4>拽专</h4>
    <div class="legend-items">
      <div class="legend-item">
        <div class="legend-color active"></div>
        <span>转专 驻注</span>
      </div>
      <div class="legend-item">
        <div class="legend-color inactive"></div>
        <span>转专  驻注</span>
      </div>
      <div class="legend-item">
        <div class="legend-color high-donor"></div>
        <span>转专 </span>
      </div>
      <div class="legend-item">
        <div class="legend-color recent-donor"></div>
        <span>转专 专</span>
      </div>
    </div>
  </div>

  <div *ngIf="loading" class="loading-overlay">
    <div class="loading-spinner">注 驻...</div>
  </div>
</div>

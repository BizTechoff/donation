<div class="modern-dual-date-picker">
  <label class="field-label" *ngIf="label">{{ label }}</label>
  
  <div class="date-inputs-container">
    <!-- Hebrew Date Input -->
    <div class="date-input-group">
      <div class="date-input hebrew-trigger" (click)="toggleHebrewPopup($event)" [class.disabled]="disabled">
        <span class="date-value" [class.placeholder]="!hebrewDateDisplay">
          {{ hebrewDateDisplay || 'בחר תאריך עברי' }}
        </span>
        <svg class="calendar-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
      </div>
      
      <!-- Hebrew Calendar Popup -->
      <div class="calendar-popup hebrew-popup" *ngIf="showHebrewPopup" #hebrewPopup>
        <div class="calendar-header">
          <button class="nav-button" (click)="changeHebrewMonth(-1)">‹</button>
          <div class="month-year">
            {{ getCurrentHebrewMonthName() }} {{ getCurrentHebrewYearString() }}
          </div>
          <button class="nav-button" (click)="changeHebrewMonth(1)">›</button>
        </div>
        
        <div class="calendar-body">
          <div class="weekdays">
            <div class="weekday" *ngFor="let day of hebrewDaysOfWeek">{{ day }}</div>
          </div>
          <div class="days-grid">
            <div class="week" *ngFor="let week of hebrewDaysInMonth">
              <div class="day" 
                   *ngFor="let day of week"
                   [class.empty]="day === 0"
                   [class.selected]="isSelectedHebrewDay(day)"
                   (click)="selectHebrewDay(day)">
                {{ day !== 0 ? getHebrewDayString(day) : '' }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Gregorian Date Input -->
    <div class="date-input-group">
      <div class="date-input gregorian-trigger" (click)="toggleGregorianPopup($event)" [class.disabled]="disabled">
        <span class="date-value" [class.placeholder]="!gregorianDateDisplay">
          {{ gregorianDateDisplay || 'בחר תאריך לועזי' }}
        </span>
        <svg class="calendar-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
      </div>
      
      <!-- Gregorian Calendar Popup -->
      <div class="calendar-popup gregorian-popup" *ngIf="showGregorianPopup" #gregorianPopup>
        <div class="calendar-header">
          <button class="nav-button" (click)="changeGregorianMonth(-1)">‹</button>
          <div class="month-year">
            {{ gregorianMonths[gregorianMonth] }} {{ gregorianYear }}
          </div>
          <button class="nav-button" (click)="changeGregorianMonth(1)">›</button>
        </div>
        
        <div class="calendar-body">
          <div class="weekdays">
            <div class="weekday" *ngFor="let day of gregorianDaysOfWeek">{{ day }}</div>
          </div>
          <div class="days-grid">
            <div class="week" *ngFor="let week of gregorianDaysInMonth">
              <div class="day" 
                   *ngFor="let day of week"
                   [class.empty]="day === null"
                   [class.selected]="isSelectedGregorianDay(day)"
                   [class.today]="isToday(day)"
                   (click)="selectGregorianDay(day)">
                {{ day !== null ? day : '' }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Clear Button -->
    <button class="clear-button" *ngIf="currentDate && !disabled" (click)="clearDate()" title="Clear date">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>
</div>